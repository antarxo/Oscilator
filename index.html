<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Προσομοίωση Ελατηρίου & Κυκλικό Διάγραμμα</title>
  <!-- Συμπερίληψη της βιβλιοθήκης p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
let amplitudeSlider, periodSlider, phaseSlider;
let startTime;

function setup() {
  createCanvas(800, 600);
  
  // Δημιουργία slider για το πλάτος (σε pixels)
  amplitudeSlider = createSlider(20, 200, 100, 1);
  amplitudeSlider.position(20, 20);
  amplitudeSlider.style('width', '160px');

  // Δημιουργία slider για την περίοδο (σε δευτερόλεπτα)
  periodSlider = createSlider(0.5, 5, 2, 0.1);
  periodSlider.position(20, 50);
  periodSlider.style('width', '160px');

  // Δημιουργία slider για την αρχική φάση (σε ακτίνια)
  phaseSlider = createSlider(0, TWO_PI, 0, 0.01);
  phaseSlider.position(20, 80);
  phaseSlider.style('width', '160px');

  startTime = millis();
}

function draw() {
  background(240);
  
  // Ανάγνωση τιμών από τους slider
  let A = amplitudeSlider.value();      // πλάτος της ταλάντωσης
  let T = periodSlider.value();           // περίοδος της ταλάντωσης (δευτερόλεπτα)
  let phi = phaseSlider.value();          // αρχική φάση (σε ακτίνια)
  
  // Υπολογισμός χρόνου και γωνίας
  let t = (millis() - startTime) / 1000;    // χρόνος σε δευτερόλεπτα
  let omega = TWO_PI / T;
  let theta = omega * t + phi;
  
  // --- Τμήμα 1: Κυκλικό διάγραμμα (Phase diagram) ---
  push();
  // Θέση του κύκλου στο αριστερό μέρος του καμβά
  let centerX = 100;
  let centerY = height / 2;
  
  // Σχεδίαση κύκλου με ακτίνα ίση με το πλάτος
  stroke(0);
  noFill();
  ellipse(centerX, centerY, 2 * A, 2 * A);
  
  // Σχεδίαση των αξόνων x και y στο κέντρο του κύκλου
  stroke(150);
  line(centerX - A - 10, centerY, centerX + A + 10, centerY);
  line(centerX, centerY - A - 10, centerX, centerY + A + 10);
  
  // Σχεδίαση του σώματος που διαγράφει την κυκλική τροχιά
  fill(255, 0, 0);
  noStroke();
  // Υπολογισμός θέσης με χρήση sin για το x και cos για το y
  let circleX = centerX + A * sin(theta);
  let circleY = centerY + A * cos(theta);
  ellipse(circleX, circleY, 20, 20);
  pop();
  
  // --- Τμήμα 2: Προσομοίωση ελατηρίου-σωματος ---
  push();
  // Ορισμός θέσης του ελατηρίου στη δεξιά πλευρά του καμβά
  let springX = width * 0.75;
  let fixedY = 50;        // Σταθερή θέση στο πάνω μέρος (ταβάνι)
  let baseLength = 150;   // Βασικό μήκος του ελατηρίου (χωρίς ταλαντώσεις)
  
  // Υπολογισμός της κατακόρυφης μετατόπισης του σώματος (ταλάντωση)
  let springDisplacement = A * cos(theta);
  let massY = fixedY + baseLength + springDisplacement;
  
  // Σχεδίαση του ελατηρίου ως μια σειρά από συνδεδεμένες κορυφές
  stroke(0);
  noFill();
  beginShape();
  vertex(springX, fixedY);
  let numCoils = 10;
  let coilLength = (massY - fixedY) / numCoils;
  for (let i = 1; i < numCoils; i++) {
    let xOffset = (i % 2 === 0) ? 20 : -20;
    vertex(springX + xOffset, fixedY + i * coilLength);
  }
  vertex(springX, massY);
  endShape();
  
  // Σχεδίαση του σώματος που κρέμεται από το ελατήριο
  fill(0, 0, 255);
  noStroke();
  ellipse(springX, massY, 40, 40);
  pop();
  
  // Εμφάνιση των τιμών των παραμέτρων για αναφορά
  fill(0);
  noStroke();
  text("Πλάτος (A): " + A, amplitudeSlider.x * 1.2, amplitudeSlider.y + 15);
  text("Περίοδος (T): " + nf(T, 1, 2) + " s", periodSlider.x * 1.2, periodSlider.y + 15);
  text("Αρχική Φάση (φ): " + nf(phi, 1, 2) + " rad", phaseSlider.x * 1.2, phaseSlider.y + 15);
}
</script>
</body>
</html>
